{% extends "layout.html" %} 
{% load static %}

{% block head_content %}
    <div>
        UPLOAD SCAN
    </div>
{% endblock head_content %}

{% block content %}
<form action="{% url "scan_upload_detect" objects.batch_id objects.title %}" method="POST" enctype="multipart/form-data">
    {% csrf_token %}
    <label for="files">Select files:</label>
    <input type="file" id="files1" name="files"><br>
    <input type="file" id="files2" name="files"><br><br>
    <input type="submit">
</form>

<div class="spinner-border text-primary d-none" role="status">
    <span class="visually-hidden">Loading...</span>
</div>


<div>
    {{ defects }}
</div>
{% endblock content %}

{% block script_content %}
<script>
    {% comment %} let annotated_image_container = $('#annotated_image_container')

    async function processImages(){
        let response = await fetch("{% url 'scan_upload_detect' %}");
        let data = await response.json();
        if (data.success) {
            annotated_image_container.attr("src", `data:image/jpeg;base64, ${data.captured_frame}`)
        }
    } {% endcomment %}
</script>
{% endblock script_content %}